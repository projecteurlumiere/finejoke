<% content_for(:main_class, :lobby) %>

<%= turbo_stream_from "lobby", channel: LobbyChannel %>

<div id="lobby" class="two-columns" data-controller="catalogue new-game containers">  
  <div id="catalogue" class="bg-red" data-containers-target="container" data-container-name="catalogue">
    <h2 class="hidden-when-mobile">Комнаты</h2>
    
    <ul id="games">
      <%= render partial: "game_entry", collection: @games, as: :game %>
    </ul>
  </div>
  
    
  <div class="hidden-when-mobile form" data-containers-target="container" data-container-name="form">
    <h2 class="hidden-when-mobile">Новая игра</h2>
    <%= render partial: "form", locals: { game: @game } %>
  </div>

  <div class="buttons-container" data-containers-target="container" data-container-name="catalogue">
    <a class="button disabled" data-catalogue-target="connect">Подключиться</a>
    <a class="button disabled" data-catalogue-target="view">Смотреть</a>
  </div>

  <div class="buttons-container hidden-when-mobile" data-containers-target="container" data-container-name="form">
    <input type="submit" form="new-game" value="Создать" data-action="click->new-game#validate">
  </div>

  <div class="buttons-container mobile-navigation">
    <a class="button selected" data-containers-target="button" data-container-name="catalogue" data-action="click->containers#show">Комнаты</a>
    <a class="button" data-containers-target="button" data-container-name="form" data-action="click->containers#show">Новая</a>
  </div>
</div>
